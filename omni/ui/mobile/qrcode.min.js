!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).QRCode=e()}(this,function(){"use strict";function t(t){this.mode=r.MODE.NUMERIC,this.data=t.toString()}function e(t){this.mode=r.MODE.ALPHANUMERIC,this.data=t}function n(t){this.mode=r.MODE.BYTE,"string"==typeof t&&(t=s.utf8ByteArray(t)),this.data=new Uint8Array(t)}function o(t){this.mode=r.MODE.KANJI,this.data=t}function i(t){return t.mode}function a(t,e){switch(t){case r.MODE.NUMERIC:return function(t,e){var n=t.data,o="";for(var i=0;i<n.length;i+=3){var a=n.substr(i,3),s=parseInt(a,10);o+=i+3<n.length?u(s,3):u(s,a.length)}return o}(t,e);case r.MODE.ALPHANUMERIC:return function(t,e){var n,o=t.data,i="";for(n=0;n<o.length;n+=2){var a=45*f.getCharCode(o[n]);n+1<o.length&&(a+=f.getCharCode(o[n+1])),i+=u(a,2)}return o.length%2&&(i+=u(f.getCharCode(o[n-1]),1)),i}(t,e);case r.MODE.BYTE:return function(t,e){var n=t.data,o="";for(var i=0;i<n.length;i++)o+=u(n[i],1);return o}(t,e);case r.MODE.KANJI:return function(t,e){var n,o=t.data,i="";for(n=0;n<o.length;n++){var a=l.toSJIS(o[n]);if(a>=33088&&a<=40956)a-=33088;else{if(!(a>=57408&&a<=60351))throw new Error("Invalid SJIS character: "+o[n]+"\nMake sure your charset is UTF-8");a-=49472}a=200*(a>>>8&255)+(255&a),i+=u(a,2)}return i}(t,e);default:throw new Error("Invalid mode: "+t.mode)}}function s(t){for(var e=[],n=t.length,r=0;r<n;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319&&n>r+1){var i=t.charCodeAt(r+1);i>=56320&&i<=57343&&(o=1024*(o&1023)+1024*(i&1023)+65536,r+=1)}o<128?e.push(o):o<2048?(e.push(o>>6|192),e.push(63&o|128)):o<55296||o>=57344&&o<65536?(e.push(o>>12|224),e.push(o>>6&63|128),e.push(63&o|128)):o>=65536&&o<=1114111?(e.push(o>>18|240),e.push(o>>12&63|128),e.push(o>>6&63|128),e.push(63&o|128)):e.push(239,191,189)}return new Uint8Array(e).buffer}var u=function(t,e){if("number"!=typeof t)throw new Error("number expected");for(var n=t.toString(2);n.length<e;)n="0"+n;return n},c=function(t){if("string"!=typeof t)throw new Error("string expected");return t.split("").map(function(t){return t.charCodeAt(0)})},r={MODE:{NUMERIC:1,ALPHANUMERIC:2,BYTE:4,KANJI:8}},f={CHAR_COUNT_BITS:[10,12,14],getCharCode:function(t){if(t>="0"&&t<="9")return t.charCodeAt(0)-48;if(t>="A"&&t<="Z")return t.charCodeAt(0)-65+10;switch(t){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44}throw new Error("Invalid character: "+t)}},l={isValid:function(t){return!isNaN(t)&&t>=1&&t<=40},from:function(t,e){return isNaN(t)||t<1||t>40?void 0:parseInt(t,10)},toSJIS:function(t){return c(t)[0]}};t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(t){return 4+l.getCharCountIndicator(this.mode,t)+10*Math.floor(this.data.length/3)+(this.data.length%3?this.data.length%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(t){return 4+l.getCharCountIndicator(this.mode,t)+11*Math.floor(this.data.length/2)+(this.data.length%2?6:0)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(t){return 4+l.getCharCountIndicator(this.mode,t)+8*this.data.length},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(t){return 4+l.getCharCountIndicator(this.mode,t)+13*this.data.length};var h=function(t){return new RegExp("^[0-9]+$").test(t)},d=function(t){return new RegExp("^[0-9A-Z $%*+\\-./:]+$").test(t)},g=function(){function t(t){this.segments=[],t&&this.put(t)}return t.prototype.getLength=function(){return this.segments.reduce(function(t,e){return t+e.getLength()},0)},t.prototype.put=function(t){if("string"==typeof t)this.putSegment(function(t){if(h(t))return new e(t);if(d(t))return new n(t);return new o(t)}(t));else if(t.data)this.putSegment(t);else if(Array.isArray(t)){var e=this;t.forEach(function(t){e.put(t)})}else this.segments.push(t)},t.prototype.putSegment=function(t){this.segments.push(t)},t.prototype.getBitsLength=function(t){return this.segments.reduce(function(e,n){return e+n.getBitsLength(t)},0)},t.prototype.toString=function(){return this.segments.map(function(t,e){return"seg"+e+": "+JSON.stringify({mode:t.mode,length:t.getLength(),data:Array.prototype.slice.call(t.data||t,0)})}).join("\n")},t.createSegments=function(t){var e=new t;return e.put(t),e.segments},t.fromArray=function(e){var n=new t;return n.segments=e.slice(),n},t.isArray=function(t){return Array.isArray(t)&&t.length&&t.every(function(t){return"object"==typeof t&&void 0!==t.mode})},t}(),p=function(t,e){switch(t){case r.MODE.NUMERIC:return[10,12,14][e];case r.MODE.ALPHANUMERIC:return[9,11,13][e];case r.MODE.BYTE:return[8,16,16][e];case r.MODE.KANJI:return[8,10,12][e];default:throw new Error("Invalid mode: "+t)}},m=function(){function t(t,e,n){this.mode=t,this.data=e,this.byteLength=n}return t.prototype.getLength=function(){return this.byteLength},t.prototype.getBitsLength=function(t){return 4+p(this.mode,t)+8*this.byteLength},t}(),v=function(t){for(var e=0,n=t.length;e<n;){var r=t.charCodeAt(e);if(r>=55296&&r<=56319&&n>e+1){var o=t.charCodeAt(e+1);o>=56320&&o<=57343&&(r=1024*(r&1023)+1024*(o&1023)+65536,e+=1)}e+=1}return e},y=function(t){return h(t)?new m(r.MODE.NUMERIC,t,t.length):d(t)?new m(r.MODE.ALPHANUMERIC,t,t.length):function(t){var e=s.utf8ByteArray(t);return new m(r.MODE.BYTE,t,e.length)}(t)},w=function(t,e){var n=t.getBitsLength(e);if(n<=8*l.getSymbolTotalCodewords(e))return e;throw new Error("Data too long for version "+e)},b=function(t){var e=l.getBestVersionForDataLength(t);if(!e)throw new Error("Data too long");return e},E=function(t,e){var n=l.from(e,l.ERROR_CORRECT.M);if(n)return w(t,n);for(n=1;n<=40;n++)try{return w(t,n)}catch(t){}throw new Error("Data too long")},A=function(t,e,n){var r=new g;r.put(t);var o=E(r,e);return function(t,e,n){var r=t.getBitsLength(e),o=l.getSymbolTotalCodewords(e),s=l.getTotalCodewordsCount(e,n),c=8*(o-s),f=r<=c;if(f)return u(r,4)+function(t,e){var n="";return t.segments.forEach(function(t){n+=u(t.mode,4),n+=u(t.getLength(),p(t.mode,e)),n+=a(t,e)}),n}(t,e)+function(t,e,n){var r=8*l.getSymbolTotalCodewords(n)-e;if(r<4)return"";r-=4;var o=Math.floor(r/8);o>0&&(t+="0".repeat(Math.min(4,r)),r-=4,r>0&&(t+="0".repeat(8-t.length%8),t+="11101100".repeat(Math.floor((r-t.length%8)/8))));for(var i=0;i<o;i++)t+=i%2?"00010001":"11101100";return t}(n,r,e);throw new Error("Data too long")}(r,o,n)},C=function(t){return!isNaN(t)&&t>=1&&t<=40},M={L:1,M:0,Q:3,H:2},S=function(t,e){return 10*t+e},I=function(t,e){var n,r;return n=Math.floor(t/10),r=t%10,[e[n],e[r]]},T=function(t,e){for(var n=t<<e,r=l.getBCHDigit(n)-l.getBCHDigit(285);r>=0;)n^=285<<r,r=l.getBCHDigit(n)-l.getBCHDigit(285);return t<<e|n},L=function(t,e){for(var n=t<<e,r=l.getBCHDigit(n)-l.getBCHDigit(1335);r>=0;)n^=1335<<r,r=l.getBCHDigit(n)-l.getBCHDigit(1335);return t<<e|n},B=function(){var t=new Array(256),e=new Array(256),n=1;for(var r=0;r<8;r++)t[r]=n,e[n]=r,n<<=1;for(r=8;r<256;r++)t[r]=t[r-4]^t[r-5]^t[r-6]^t[r-8],e[t[r]]=r;return{log:function(t){if(t<1)throw new Error("log("+t+")");return e[t]},exp:function(t){return t<0?0:t>=255?B.exp(t%255):t[t]}}}(),R=function(t){for(var e=0;t;)e++,t>>>=1;return e},O=function(t,e,n){var r,o,i=new Array(t.length),a=0;for(o=0;o<e;o++){r=0;for(var s=0;s<t.length;s++)r^=B.exp(B.log(t[s])+B.log(n[a+s]));i[o]=r,a+=t.length}return i},D=function(t,e){var n=t.length;if(n%e)throw new Error("Invalid block size");for(var r=Math.floor(n/e),o=new Array(e),i=0,a=new Array(r);i<r;i++){a[i]=new Array(e);for(var s=0;s<e;s++)a[i][s]=t[i*e+s]}for(s=0;s<e;s++){o[s]=new Array(r);for(i=0;i<r;i++)o[s][i]=a[i][s]}return o},N=function(t,e){for(var n=new Array(t*e),r=0,o=0;o<e;o++)for(var i=0;i<t;i++)n[r++]=t[i][o];return n},P=function(t,e){var n=t.slice(),r=e.slice(),o=n.length-1;while(o>=0&&!n[o])o--;if(o<0)return n;var i=B.log(n[o])-B.log(r[0]);for(var a=0;a<=o;a++)n[a]^=B.exp(B.log(r[a])+i);return P(n.slice(0,o),r)},k=function(t,e){var n=t.length;if(n%e)throw new Error("Invalid block size");var r=Math.floor(n/e),o=n%e,i=r+1,a=e-o,s=new Array(a),u=new Array(o);for(var c=0;c<a;c++)s[c]=t.slice(c*r,c*r+r);for(c=0;c<o;c++)u[c]=t.slice(a*r+c*i,a*r+c*i+i);return s.concat(u)},U=function(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r].slice(0,e);n.push(o)}return n},F=function(t,e){var n=0;return t.forEach(function(t){n+=t.length}),new Array(n).fill(0).map(function(n,r){var o=r%e,i=Math.floor(r/e);return t[o][i]})},j=function(t,e){var n=l.getSymbolTotalCodewords(e),r=l.getTotalCodewordsCount(e,t),o=n-r,i=l.getBlocksCount(e,t),a=i-n%i,s=Math.floor(n/i),u=s+1,c=Math.floor(o/i),f=c+1,h=c-f,d=new Array(f),g=0,p=new Array(i);for(g=0;g<i;g++){var m=g<a?c:f;p[g]=new Array(m);for(var v=0;v<m;v++)p[g][v]=1}for(g=0;g<f;g++){d[g]=new Array(h);for(v=0;v<h;v++)d[g][v]=B.exp(g+v)}var y=k(t,i),w=U(y,s),b=U(y,u);a>0&&(w=w.slice(0,a),b=b.slice(a));var E=new Array(i);for(g=0;g<a;g++)E[g]=O(w[g],c,d[g]);for(g=a;g<i;g++)E[g]=O(b[g-a],f,p[g]);return F(y,i).concat(F(E,i))},H=function(t,e,n){return{x:t,y:e,dark:n}},G=function(t,e){for(var n=[],r=-1;r<=7;r++)if(!(e+r<=-1||t<=e+r))for(var o=-1;o<=7;o++)t+o<=-1||e<=t+o||(r>=0&&r<=6&&(0===o||6===o)||o>=0&&o<=6&&(0===r||6===r)||r>=2&&r<=4&&o>=2&&o<=4?n.push(H(t+o,e+r,!0)):n.push(H(t+o,e+r,!1)));return n},V=function(t,e){for(var n=[],r=t.length,o=0,i=-1,a=r-1,s=!1,u=!0;o<r;){for(var c=a;u?c>=0:c<r;c+=u?-1:1)if(void 0===e[c][o]){var f=!1;i<t.length&&(f=1==(t[i]>>>6-o%6&1)),e[c][o]=f,n.push(H(o,c,f)),6==++i&&(i++,o++)}o++,u=!u}return n},z=function(t){for(var e=0,n=0;n<t.length;n++){var r=t[n];e+=r.dark?1:0}return Math.abs(Math.ceil(100*e/t.length)-50)/5},W=function(t,e){var n=0,r=e.length,o=e[0].length;for(var i=0;i<r;i++)for(var a=0;a<o;a++){var s=0;if(e[i][a]===t){s++;for(var u=i+1;u<r&&e[u][a]===t;u++)s++;if(s>=5)n+=3+s-5}}for(i=0;i<r;i++)for(a=0;a<o;a++){s=0;if(e[i][a]===t){s++;for(u=a+1;u<o&&e[i][u]===t;u++)s++;if(s>=5)n+=3+s-5}}return n},q=function(t){for(var e=0,n=t.length,r=t[0].length,o=0;o<n-1;o++)for(var i=0;i<r-1;i++){var a=t[o][i]+t[o][i+1]+t[o+1][i]+t[o+1][i+1];4!==a&&0!==a||(e+=3)}return e},Y=function(t){for(var e=0,n=t.length,r=t[0].length,o=0;o<n;o++){for(var i=0,a=0,s=0;s<r;s++){var u=t[o][s];s>0&&u===t[o][s-1]?i++:(i>=5&&(e+=3+i-5),a=i,i=1);s===r-1&&i>=5&&(e+=3+i-5)}if(o>0){for(s=0;s<r;s++){u=t[o][s];s>0&&u===t[o-1][s]?a++:(a>=5&&(e+=3+a-5),a=1)}}}return e},X=function(t){for(var e=0,n=t.length,r=t[0].length,o=0;o<n-6;o++)for(var i=0;i<r;i++)t[o][i]&&!t[o+1][i]&&t[o+2][i]&&t[o+3][i]&&t[o+4][i]&&!t[o+5][i]&&t[o+6][i]&&(i>=4&&!t[o][i-1]&&!t[o][i-2]&&!t[o][i-3]&&!t[o][i-4]||i+7<r&&!t[o][i+1]&&!t[o][i+2]&&!t[o][i+3]&&!t[o][i+4])&&e++;for(i=0;i<r-6;i++)for(o=0;o<n;o++)t[o][i]&&!t[o][i+1]&&t[o][i+2]&&t[o][i+3]&&t[o][i+4]&&!t[o][i+5]&&t[o][i+6]&&(o>=4&&!t[o-1][i]&&!t[o-2][i]&&!t[o-3][i]&&!t[o-4][i]||o+7<n&&!t[o+1][i]&&!t[o+2][i]&&!t[o+3][i]&&!t[o+4][i])&&e++;return 40*e},J=function(t){return z(t)+W(!0,t)+W(!1,t)+q(t)+Y(t)+X(t)},K=function(t,e,n){var r,o=l.getSymbolSize(t);if(n===M.L||n===M.H){var i=l.getCorrectionBitsCount(t,n)%8;r=L(e<<i,i)}else r=T(e,10);return u(r,15)},Q=function(t){var e=t<<1;return(21522^e)>>>0},Z=function(t,e){for(var n=J(e),r=Number.MAX_VALUE,o=0,i=0,a=0;a<8;a++){!function(t,e,n){var r=l.getSymbolSize(t);n===M.L||n===M.H?function(t,e,n){var r=K(t,e,n);for(var o=0;o<15;o++){var i=1==(r>>o&1);o<6?t[o][8]=i:o<8?t[o+1][8]=i:t[r-15+o][8]=i,o<8?t[8][r-o-1]=i:o<9?t[8][15-o-1+1]=i:t[8][15-o-1]=i}t[r-8][8]=1}(e,t,n):function(t,e,n){var r=K(t,e,n);for(var o=0;o<15;o++){var i=1==(r>>o&1);o<6?t[o][8]=i:o<8?t[o+1][8]=i:t[r-15+o][8]=i,o<8?t[8][r-o-1]=i:o<9?t[8][15-o-1+1]=i:t[8][15-o-1]=i}t[r-8][8]=1}(e,t,n)}(a,e,t);var s=J(e);s<r&&(r=s,o=a)}return o},$=function(){var t=function(t,e){var n=l.getSymbolSize(t),r=new Array(n);for(var o=0;o<n;o++){r[o]=new Array(n);for(var i=0;i<n;i++)r[o][i]=null}return r}(e,n);return function(t,e){var n=t.length;for(var r=0;r<n;r++)for(var o=0;o<n;o++)null===t[r][o]&&(t[r][o]=function(t,e,n){return(Math.floor(t/2)+Math.floor(e/2))%2==0}(r,o))}(t),function(t,e,n){var r=l.getSymbolSize(e);!function(t,e){for(var n=0;n<e;n++)for(var r=0;r<e;r++)t[n][r]=n+r&1}(t,r),function(t,e){var n=G(0,0),r=G(0,e-7),o=G(e-7,0);n.forEach(function(e){t[e.y][e.x]=e.dark}),r.forEach(function(e){t[e.y][e.x]=e.dark}),o.forEach(function(e){t[e.y][e.x]=e.dark})}(t,r),function(t,e){for(var n=8;n<e-8;n++)null===t[6][n]&&(t[6][n]=n%2==0),null===t[n][6]&&(t[n][6]=n%2==0)}(t,r),function(t,e){for(var n=l.getPositions(e),r=0;r<n.length;r++)for(var o=n[r][0],i=n[r][1],a=-1;a<=7;a++)if(!(o+a<=-1||e<=o+a))for(var s=-1;s<=7;s++)i+s<=-1||e<=i+s||(a>=0&&a<=6&&(0===s||6===s)||s>=0&&s<=6&&(0===a||6===a)||a>=2&&a<=4&&s>=2&&s<=4?t[o+a][i+s]=!0:t[o+a][i+s]=!1)}(t,r)}(t,e),function(t,e,n){var r=l.getSymbolSize(e),o=Q(e);for(var i=0;i<18;i++){var a=1==(o>>i&1),s=Math.floor(i/3),u=i%3+r-8-3;t[s][u]=a,t[u][s]=a}}(t,e),function(t,e,n){var r=l.getSymbolSize(e);for(var o=0;o<r;o++)for(var i=0;i<r;i++)null!==t[o][i]||function(t,e,n){return(t+e+n)%3==0}(o,i)||(t[o][i]=!1)}(t,e),V(n,t)}(t,e,n),t},_=function(t,e,n,r){var o;if(g.isArray(t))o=g.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");var i=e;if(!i){var a=g.rawSplit(t);i=b(a)}o=g.fromString(t,l.getBestVersionForDataLength(a))}var s=b(o);if(s<1)throw new Error("Invalid version");if(void 0!==e&&(s=l.from(e),!s))throw new Error("Invalid version");if(void 0===n&&(n=M.M),!C(s)||!function(t){return void 0!==M[t]}(n))throw new Error("Invalid error correction level");return $(s,n,A(o,s,n))};return l.getSymbolSize=function(t){if(!t)throw new Error("Invalid version");return 4*t+17},l.getSymbolTotalCodewords=function(t){return l.getSymbolSize(t)*l.getSymbolSize(t)},l.getBCHDigit=function(t){for(var e=0;t;)e++,t>>>=1;return e},l.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');l.toSJIS=t},l.isValid=C,l.from=function(t,e){return C(t)?parseInt(t,10):e},l.getCapacity=function(t,e,n){if(!C(t))throw new Error("Invalid version");void 0===n&&(n=r.MODE.BYTE);var o,a=l.getSymbolTotalCodewords(t),s=function(t,e){switch(e){case M.L:return S(1,[[0,7],[7,10],[17,15],[32,20],[40,26]]);case M.M:return S(0,[[0,10],[16,16],[28,26],[44,36],[64,48]]);case M.Q:return S(3,[[0,13],[22,22],[36,36],[52,52],[72,64]]);case M.H:return S(2,[[0,17],[28,28],[44,44],[64,64],[88,88]]);default:return null}}(t,e);if(!s)return 0;o=a-s;var u=4+p(n,t);switch(n){case r.MODE.NUMERIC:return Math.floor((8*o-u)/10)*3+(8*o-u)%10<4?0:(8*o-u)%10<7?1:2;case r.MODE.ALPHANUMERIC:return Math.floor((8*o-u)/11)*2+(8*o-u)%11<6?0:1;case r.MODE.BYTE:return Math.floor((8*o-u)/8);case r.MODE.KANJI:return Math.floor((8*o-u)/13);default:return 0}},l.getBestVersionForDataLength=function(t){var e,n=t.getBitsLength();for(e=1;e<=40;e++)if(n<=l.getCapacity(e,M.M,r.MODE.MIXED))break;return e<=40?e:void 0},l.getErrorCorrectionBitsCount=function(t,e){var n=l.getSymbolTotalCodewords(t);switch(e){case M.L:return S(1,I(n,[0,7,10,15,20,26,36,40,48,60,72,80,96,104,120,132,144,168,180,196,224,224,252,270,300,312,336,360,390,420,450,480,510,540,570,570,600,630,660,720,750]));case M.M:return S(0,I(n,[0,10,16,26,36,48,64,72,88,110,130,150,176,198,216,240,280,308,338,364,416,442,476,504,560,588,644,700,728,784,812,868,924,980,1036,1064,1120,1204,1260,1316,1372]));case M.Q:return S(3,I(n,[0,13,22,36,52,72,96,108,132,160,192,224,260,288,320,360,408,448,504,546,600,644,700,728,784,812,896,960,1024,1088,1120,1204,1260,1316,1372,1428,1484,1540,1596,1652,1708]));case M.H:return S(2,I(n,[0,17,28,44,64,88,112,130,156,192,224,264,308,352,384,432,480,532,588,650,700,750,816,900,960,1050,1110,1200,1260,1350,1440,1530,1620,1710,1800,1890,1980,2070,2160,2250,2340]));default:return null}},l.getPositions=function(t){return[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]][t-1]},{create:function(t,e){if(void 0===t||""===t)throw new Error("No input text");var n,r,o=M.M;return void 0!==e&&(o=e.errorCorrectionLevel,n=e.version,r=e.maskPattern),_(t,n,o,r)},toCanvas:function(t,e,n){if("function"==typeof e&&(n=e,e=void 0),"object"!=typeof t||null===t)throw new Error("Expected a QRCode object");var r=e||{},o=r.width||354,i=r.margin||4*Math.max(1,Math.floor(o/25)),a=r.color||{};void 0===a.dark&&(a.dark="#000000ff"),void 0===a.light&&(a.light="#ffffffff");var s=t.modules.size,u=t.modules.data,c=o+2*i,f=Math.floor((o-2*i)/s),l=Math.floor((c-s*f)/2),h=document.createElement("canvas");h.width=c,h.height=c;var d=h.getContext("2d");d.fillStyle=a.light,d.fillRect(0,0,c,c),d.fillStyle=a.dark;for(var g=0;g<s;g++)for(var p=0;p<s;p++)u[g*s+p]&&d.fillRect(l+p*f,l+g*f,f,f);return n&&n(null,h),h},toDataURL:function(t,e,n){if("function"==typeof e&&(n=e,e=void 0),"object"!=typeof t||null===t)throw new Error("Expected a QRCode object");var r=this.toCanvas(t,e);return n&&n(null,r.toDataURL()),r.toDataURL()}}});