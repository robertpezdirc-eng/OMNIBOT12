<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåê Omni-APP - Interaktivni Ready-to-Run Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            overflow: hidden;
            height: 100vh;
        }
        
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header h1 {
            font-size: 1.8em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        
        .system-status {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #00ff88;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
            100% { opacity: 1; transform: scale(1); }
        }
        
        .dashboard-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            padding-top: 80px;
        }
        
        #links {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        .node {
            position: absolute;
            border: 3px solid #00ff88;
            border-radius: 15px;
            padding: 15px 20px;
            background: linear-gradient(135deg, rgba(0,255,136,0.1) 0%, rgba(0,200,255,0.1) 100%);
            backdrop-filter: blur(10px);
            text-align: center;
            min-width: 160px;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            user-select: none;
        }
        
        .node:hover {
            transform: scale(1.1) translateY(-5px);
            border-color: #ffff00;
            background: linear-gradient(135deg, rgba(255,255,0,0.2) 0%, rgba(0,255,136,0.2) 100%);
            box-shadow: 0 15px 35px rgba(0,255,136,0.4);
        }
        
        .node.active {
            border-color: #ff6b6b;
            background: linear-gradient(135deg, rgba(255,107,107,0.2) 0%, rgba(255,0,150,0.2) 100%);
            transform: scale(1.15);
        }
        
        .node-icon {
            font-size: 2.5em;
            display: block;
            margin-bottom: 8px;
        }
        
        .node-title {
            font-size: 1em;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }
        
        .global-optimizer {
            border-color: #ffd700;
            background: linear-gradient(135deg, rgba(255,215,0,0.3) 0%, rgba(255,140,0,0.3) 100%);
            font-size: 1.2em;
            min-width: 200px;
            animation: globalPulse 3s infinite;
        }
        
        @keyframes globalPulse {
            0% { box-shadow: 0 8px 25px rgba(255,215,0,0.3); }
            50% { box-shadow: 0 15px 40px rgba(255,215,0,0.6); }
            100% { box-shadow: 0 8px 25px rgba(255,215,0,0.3); }
        }
        
        .link {
            stroke: #00ff88;
            stroke-width: 2px;
            opacity: 0.6;
            animation: linkFlow 4s infinite;
        }
        
        @keyframes linkFlow {
            0% { stroke-dasharray: 0 10; }
            50% { stroke-dasharray: 5 5; }
            100% { stroke-dasharray: 10 0; }
        }
        
        .info-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            backdrop-filter: blur(15px);
            border: 2px solid #00ff88;
            border-radius: 20px;
            padding: 30px;
            max-width: 500px;
            z-index: 1000;
            display: none;
            text-align: center;
        }
        
        .info-panel h3 {
            color: #00ff88;
            margin-bottom: 15px;
            font-size: 1.8em;
        }
        
        .info-panel p {
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .close-btn {
            background: #ff6b6b;
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .close-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
        }
        
        .controls {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }
        
        .control-btn {
            background: rgba(0,255,136,0.2);
            border: 2px solid #00ff88;
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .control-btn:hover {
            background: rgba(0,255,136,0.4);
            transform: scale(1.05);
        }
        
        .connection-status {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0,0,0,0.8);
            padding: 15px 20px;
            border-radius: 10px;
            border: 1px solid #00ff88;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üåê Omni-APP - Interaktivni Dashboard</h1>
        <div class="system-status">
            <span>Sistem Aktiven</span>
            <div class="status-indicator"></div>
            <span id="module-count">17 Modulov</span>
        </div>
    </div>
    
    <div class="dashboard-container">
        <svg id="links" width="100%" height="100%"></svg>
        
        <!-- Global Optimizer - Centralno -->
        <div class="node global-optimizer" id="global" style="top: 300px; left: 50%; transform: translateX(-50%);">
            <span class="node-icon">üåç</span>
            <div class="node-title">Global Optimizer</div>
        </div>
        
        <!-- Prvi krog modulov -->
        <div class="node" id="finance" style="top: 150px; left: 200px;">
            <span class="node-icon">üí∞</span>
            <div class="node-title">Finance Optimizer</div>
        </div>
        
        <div class="node" id="logistics" style="top: 120px; left: 400px;">
            <span class="node-icon">üì¶</span>
            <div class="node-title">Logistics Optimizer</div>
        </div>
        
        <div class="node" id="healthcare" style="top: 150px; left: 600px;">
            <span class="node-icon">üè•</span>
            <div class="node-title">Healthcare Optimizer</div>
        </div>
        
        <div class="node" id="tourism" style="top: 120px; left: 800px;">
            <span class="node-icon">üèñÔ∏è</span>
            <div class="node-title">Tourism Optimizer</div>
        </div>
        
        <div class="node" id="agriculture" style="top: 150px; left: 1000px;">
            <span class="node-icon">üåæ</span>
            <div class="node-title">Agriculture Optimizer</div>
        </div>
        
        <!-- Drugi krog modulov -->
        <div class="node" id="industry" style="top: 250px; left: 100px;">
            <span class="node-icon">üè≠</span>
            <div class="node-title">Industry Optimizer</div>
        </div>
        
        <div class="node" id="energy" style="top: 200px; left: 50px;">
            <span class="node-icon">‚ö°</span>
            <div class="node-title">Energy Optimizer</div>
        </div>
        
        <div class="node" id="smart_home" style="top: 350px; left: 80px;">
            <span class="node-icon">üè†</span>
            <div class="node-title">Smart Home Optimizer</div>
        </div>
        
        <div class="node" id="vehicles" style="top: 200px; left: 1200px;">
            <span class="node-icon">üöó</span>
            <div class="node-title">Autonomous Vehicles</div>
        </div>
        
        <div class="node" id="robotics" style="top: 250px; left: 1150px;">
            <span class="node-icon">ü§ñ</span>
            <div class="node-title">Robotics Optimizer</div>
        </div>
        
        <!-- Tretji krog modulov -->
        <div class="node" id="science" style="top: 450px; left: 200px;">
            <span class="node-icon">üî¨</span>
            <div class="node-title">Science Optimizer</div>
        </div>
        
        <div class="node" id="communications" style="top: 480px; left: 400px;">
            <span class="node-icon">üì°</span>
            <div class="node-title">Communications Optimizer</div>
        </div>
        
        <div class="node" id="security" style="top: 450px; left: 600px;">
            <span class="node-icon">üîí</span>
            <div class="node-title">Security Optimizer</div>
        </div>
        
        <div class="node" id="art" style="top: 480px; left: 800px;">
            <span class="node-icon">üé®</span>
            <div class="node-title">Art & Creativity</div>
        </div>
        
        <div class="node" id="devops" style="top: 450px; left: 1000px;">
            <span class="node-icon">‚öôÔ∏è</span>
            <div class="node-title">DevOps Optimizer</div>
        </div>
        
        <div class="node" id="iot" style="top: 350px; left: 1100px;">
            <span class="node-icon">üì±</span>
            <div class="node-title">IoT Optimizer</div>
        </div>
    </div>
    
    <!-- Info Panel -->
    <div class="info-panel" id="info-panel">
        <h3 id="info-title">Modul Info</h3>
        <p id="info-description">Opis modula</p>
        <div id="info-features"></div>
        <button class="close-btn" onclick="closeInfoPanel()">Zapri</button>
    </div>
    
    <!-- Controls -->
    <div class="controls">
        <button class="control-btn" onclick="toggleConnections()">Preklopi Povezave</button>
        <button class="control-btn" onclick="resetView()">Ponastavi Pogled</button>
        <button class="control-btn" onclick="connectToBackend()">Pove≈æi Backend</button>
    </div>
    
    <!-- Connection Status -->
    <div class="connection-status">
        <div>üîó Backend Status: <span id="backend-status">Povezovanje...</span></div>
        <div>üìä Aktivni Moduli: <span id="active-modules">17/17</span></div>
    </div>
    
    <script>
        const linksSVG = document.getElementById("links");
        let connectionsVisible = true;
        let backendConnected = false;
        
        // Definicija vseh modulov z informacijami
        const moduleInfo = {
            global: {
                title: "üåç Global Optimizer",
                description: "Centralni sistem, ki koordinira in optimizira vse module v enotno celoto. Samouƒçeƒçi sistem z naprednimi algoritmi.",
                features: ["Koordinacija vseh modulov", "Globalna optimizacija", "Samodejno uƒçenje", "Redundanca in backup", "Real-time monitoring"]
            },
            finance: {
                title: "üí∞ Finance Optimizer", 
                description: "Napredni finanƒçni sistem za upravljanje prihodkov, odhodkov in bilanƒçnih analiz z AI optimizacijo.",
                features: ["Avtomatsko sledenje financ", "Bilanƒçne analize", "Napovedovanje trendov", "Investicijske strategije"]
            },
            logistics: {
                title: "üì¶ Logistics Optimizer",
                description: "Inteligentno upravljanje zalog, dostav in optimizacija logistiƒçnih procesov.",
                features: ["Upravljanje zalog", "Optimizacija dostav", "Napovedovanje povpra≈°evanja", "Real-time sledenje"]
            },
            healthcare: {
                title: "üè• Healthcare Optimizer",
                description: "Napredni zdravstveni sistem za nadzor pacientov, diagnostiko in samouƒçeƒçe analize.",
                features: ["Nadzor pacientov", "AI diagnostika", "Preventivno svetovanje", "Zdravstveni protokoli"]
            },
            tourism: {
                title: "üèñÔ∏è Tourism Optimizer",
                description: "Inteligentno upravljanje turistiƒçnih destinacij, rezervacij in personaliziranih itinerarjev.",
                features: ["Personalizirani itinerarji", "Avtomatske rezervacije", "Analiza trendov", "Optimizacija cen"]
            },
            agriculture: {
                title: "üåæ Agriculture Optimizer",
                description: "Pametno kmetijstvo z optimizacijo pridelkov, nadzor ≈æivali in ekolo≈°ko pridelavo.",
                features: ["Optimizacija pridelkov", "Nadzor ≈æivali", "Ekolo≈°ko kmetovanje", "Vremenska napoved"]
            },
            industry: {
                title: "üè≠ Industry Optimizer",
                description: "Industrijska avtomatizacija z optimizacijo strojev, proizvodnje in kakovosti.",
                features: ["Avtomatizacija proizvodnje", "Nadzor kakovosti", "Energijska optimizacija", "Preventivno vzdr≈æevanje"]
            },
            energy: {
                title: "‚ö° Energy Optimizer",
                description: "Pametno upravljanje energije z optimizacijo porabe in obnovljivimi viri.",
                features: ["Optimizacija porabe", "Obnovljivi viri", "Napovedovanje potreb", "Avtomatsko preklapljanje"]
            },
            smart_home: {
                title: "üè† Smart Home Optimizer",
                description: "Inteligentni dom z IoT napravami, avtomatizacijo in pametnim nadzorom.",
                features: ["Avtomatizacija naprav", "Upravljanje temperature", "Varnostni nadzor", "Energijska optimizacija"]
            },
            vehicles: {
                title: "üöó Autonomous Vehicles",
                description: "Sistem za avtonomna vozila z naprednim nadzorom in optimizacijo poti.",
                features: ["Avtonomna navigacija", "Optimizacija poti", "Varnostni nadzor", "Koordinacija voznih parkov"]
            },
            robotics: {
                title: "ü§ñ Robotics Optimizer",
                description: "Upravljanje robotskih sistemov za industrijsko in domaƒço uporabo.",
                features: ["Industrijski roboti", "Domaƒçi pomoƒçniki", "Avtomatizacija opravil", "Uƒçenje nalog"]
            },
            science: {
                title: "üî¨ Science Optimizer",
                description: "Znanstveni raziskovalni sistem za projekte, analize in odkritja.",
                features: ["Raziskovalni projekti", "Analiza podatkov", "Simulacije", "Avtomatizacija eksperimentov"]
            },
            communications: {
                title: "üì° Communications Optimizer",
                description: "Napredni komunikacijski sistem za optimizacijo omre≈æij in podatkovnih tokov.",
                features: ["Optimizacija omre≈æij", "Nadzor podatkov", "Diagnostika omre≈æij", "Varnostno filtriranje"]
            },
            security: {
                title: "üîí Security Optimizer",
                description: "Napredni varnostni sistem za za≈°ƒçito, nadzor in preventivno varnost.",
                features: ["Real-time nadzor", "Detekcija gro≈æenj", "Biometriƒçna avtentifikacija", "Varnostni protokoli"]
            },
            art: {
                title: "üé® Art & Creativity",
                description: "Kreativni sistem za umetnost, galerije in umetni≈°ke projekte.",
                features: ["AI generiranje umetnosti", "Upravljanje galerij", "Analiza trendov", "Kreativno sodelovanje"]
            },
            devops: {
                title: "‚öôÔ∏è DevOps Optimizer",
                description: "Avtomatizacija razvoja, deployment-a in sistemskega nadzora.",
                features: ["Avtomatski deployment", "Sistemski nadzor", "Optimizacija performans", "Avtomatsko skaliranje"]
            },
            iot: {
                title: "üì± IoT Optimizer",
                description: "Upravljanje IoT naprav, senzorjev in pametnih povezav.",
                features: ["Upravljanje IoT", "Nadzor senzorjev", "Konfiguracija naprav", "Analiza podatkov"]
            }
        };
        
        const nodes = [
            "finance", "logistics", "healthcare", "tourism", "agriculture",
            "industry", "energy", "smart_home", "vehicles", "robotics", 
            "science", "communications", "security", "art", "devops", "iot"
        ];
        
        // Funkcija za ustvarjanje SVG povezav <mcreference link="http://www.w3.org/2000/svg" index="0">0</mcreference>
        function connectNodes(sourceId, targetId) {
            const source = document.getElementById(sourceId);
            const target = document.getElementById(targetId);
            
            if (!source || !target) return;
            
            const sourceRect = source.getBoundingClientRect();
            const targetRect = target.getBoundingClientRect();
            
            const x1 = sourceRect.left + sourceRect.width / 2;
            const y1 = sourceRect.top + sourceRect.height / 2;
            const x2 = targetRect.left + targetRect.width / 2;
            const y2 = targetRect.top + targetRect.height / 2;
            
            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
            line.setAttribute("x1", x1);
            line.setAttribute("y1", y1);
            line.setAttribute("x2", x2);
            line.setAttribute("y2", y2);
            line.setAttribute("class", "link");
            line.setAttribute("id", `link-${sourceId}-${targetId}`);
            
            linksSVG.appendChild(line);
        }
        
        // Funkcija za prikaz informacij o modulu
        function showModuleInfo(moduleId) {
            const info = moduleInfo[moduleId];
            if (!info) return;
            
            document.getElementById('info-title').textContent = info.title;
            document.getElementById('info-description').textContent = info.description;
            
            const featuresDiv = document.getElementById('info-features');
            featuresDiv.innerHTML = '<h4>Kljuƒçne Funkcije:</h4><ul>' + 
                info.features.map(feature => `<li>‚úì ${feature}</li>`).join('') + 
                '</ul>';
            
            document.getElementById('info-panel').style.display = 'block';
            
            // Oznaƒçimo aktiven modul
            document.querySelectorAll('.node').forEach(node => node.classList.remove('active'));
            document.getElementById(moduleId).classList.add('active');
        }
        
        function closeInfoPanel() {
            document.getElementById('info-panel').style.display = 'none';
            document.querySelectorAll('.node').forEach(node => node.classList.remove('active'));
        }
        
        function toggleConnections() {
            connectionsVisible = !connectionsVisible;
            const links = document.querySelectorAll('.link');
            links.forEach(link => {
                link.style.display = connectionsVisible ? 'block' : 'none';
            });
        }
        
        function resetView() {
            closeInfoPanel();
            document.querySelectorAll('.node').forEach(node => node.classList.remove('active'));
        }
        
        // Backend povezava
        async function connectToBackend() {
            const statusElement = document.getElementById('backend-status');
            statusElement.textContent = 'Povezovanje...';
            
            try {
                // Poskusimo povezavo z glavnim dashboardom
                const response = await fetch('http://localhost:8000/api/status');
                if (response.ok) {
                    backendConnected = true;
                    statusElement.textContent = '‚úÖ Povezano';
                    statusElement.style.color = '#00ff88';
                    
                    // Posodobimo status modulov
                    const data = await response.json();
                    updateModuleStatus(data);
                } else {
                    throw new Error('Backend ni dosegljiv');
                }
            } catch (error) {
                statusElement.textContent = '‚ùå Ni povezave';
                statusElement.style.color = '#ff6b6b';
                console.log('Backend povezava ni uspe≈°na, deluje v standalone naƒçinu');
            }
        }
        
        function updateModuleStatus(data) {
            if (data && data.modules) {
                const activeCount = Object.values(data.modules).filter(module => module.status === 'active').length;
                document.getElementById('active-modules').textContent = `${activeCount}/17`;
            }
        }
        
        // Inicializacija
        function initializeDashboard() {
            // Ustvarimo povezave med Global Optimizer in vsemi moduli
            nodes.forEach(node => connectNodes("global", node));
            
            // Dodamo event listener-je za vse module
            [...nodes, "global"].forEach(nodeId => {
                const element = document.getElementById(nodeId);
                if (element) {
                    element.onclick = () => showModuleInfo(nodeId);
                }
            });
            
            // Poskusimo avtomatsko povezavo z backend-om
            setTimeout(connectToBackend, 1000);
            
            // Periodiƒçno preverjanje backend povezave
            setInterval(() => {
                if (backendConnected) {
                    connectToBackend();
                }
            }, 30000); // Vsakih 30 sekund
        }
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            switch(e.key) {
                case 'Escape':
                    closeInfoPanel();
                    break;
                case 'c':
                case 'C':
                    toggleConnections();
                    break;
                case 'r':
                case 'R':
                    resetView();
                    break;
                case 'b':
                case 'B':
                    connectToBackend();
                    break;
            }
        });
        
        // Zagon ob nalaganju strani
        window.addEventListener('load', initializeDashboard);
        window.addEventListener('resize', () => {
            // Ponovno nari≈°emo povezave ob spremembi velikosti okna
            linksSVG.innerHTML = '';
            setTimeout(() => {
                nodes.forEach(node => connectNodes("global", node));
            }, 100);
        });
    </script>
</body>
</html>